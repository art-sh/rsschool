!function(e){function t(t){for(var n,o,i=t[0],c=t[1],u=t[2],p=0,h=[];p<i.length;p++)o=i[p],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&h.push(a[o][0]),a[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(l&&l(t);h.length;)h.shift()();return r.push.apply(r,u||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],n=!0,i=1;i<s.length;i++){var c=s[i];0!==a[c]&&(n=!1)}n&&(r.splice(t--,1),e=o(o.s=s[0]))}return e}var n={},a={0:0},r=[];function o(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=n,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(s,n,function(t){return e[t]}.bind(null,n));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;r.push([122,1]),s()}({122:function(e,t,s){s(123),e.exports=s(311)},310:function(e,t){e.exports='<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <title>Virtual keyboard</title> <link rel="shortcut icon" href="assets/favicon.ico"> <link href="https://fonts.googleapis.com/css2?family=Piazzolla:wght@200;500;900&display=swap" rel="stylesheet"> </head> <body class="body"> <section class="main"> <header class="main__header"> <h1>Virtual keyboard</h1> </header> <div class="main__content"> <h2 class="main__content-header">Click on textarea to show keyboard</h2> <textarea id="main-textarea" class="main__content-textarea" placeholder="Start type here..."></textarea> </div> </section> </body> </html>'},311:function(e,t,s){"use strict";s.r(t);s(310);var n=s(60);function a(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}new(function(){function e(t,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$el=null,this.input={element:t,getElementInfo:function(){var e={};return e.cursorPosition=this.element.selectionStart,e.value=this.element.value,e},push:function(e){var t=this.getElementInfo(),s=t.value,n=t.cursorPosition;this.element.value=s.slice(0,n)+e+s.slice(n),this.element.setSelectionRange(n+1,n+1),this.element.focus()},removeChar:function(){var e=this.getElementInfo(),t=e.value,s=e.cursorPosition;s&&(this.element.value=t.slice(0,s-1)+t.slice(s),this.element.setSelectionRange(s-1,s-1))},moveCursorLeft:function(){var e=this.element.selectionStart-1;this.element.setSelectionRange(e,e)},moveCursorRight:function(){var e=this.element.selectionStart+1;this.element.setSelectionRange(e,e)}},this.keyboardLayout=s,this.classShow="show",this.classHide="hide",this.classWrapper="keyboard",this.classLine="keyboard__line",this.classButton="keyboard__line-button",this.classButtonWide="keyboard__line-button--wide",this.classButtonExtraWide="keyboard__line-button--extra-wide",this.classButtonText="keyboard__line-button-text",this.classButtonTextHide="keyboard__line-button-text--hide",this.classButtonTextShow="keyboard__line-button-text--show",this.eventChangeLanguage="changeLanguage",this.eventChangeRegistry="changeRegistry",this.currentLanguage="en",this.isShifted=!1,this.isUppercase=!1,this.highlightingButtons={},this.isSoundAlowed=!0,this.audio=new(window.AudioContext||window.webkitAudioContext),this.sounds={key_ru:{src:"./assets/sounds/key_ru.mp3",buffer:null},key_en:{src:"./assets/sounds/key_en.mp3",buffer:null},capslock:{src:"./assets/sounds/capslock.mp3",buffer:null},shift:{src:"./assets/sounds/shift.mp3",buffer:null},backspace:{src:"./assets/sounds/backspace.mp3",buffer:null},enter:{src:"./assets/sounds/enter.mp3",buffer:null}},this.loadSounds(),this.isVoiceRecognitionActive=!1,this.recognition=new(window.SpeechRecognition||window.webkitSpeechRecognition),this.recognition.lang="en-US",this.recognition.continuous=!0,this.recognition.interimResults=!0,this.setRecognitionListeners(),this.keyboardCreate(),this.setInputListeners()}var t,s,r;return t=e,(s=[{key:"keyboardCreate",value:function(){this.$el instanceof HTMLElement||this.buildKeyboardEntity()}},{key:"keyboardShow",value:function(){this.$el.classList.add(this.classShow)}},{key:"keyboardHide",value:function(){this.$el.classList.remove(this.classShow)}},{key:"buildKeyboardEntity",value:function(){var e=this;this.$el=document.createElement("div"),this.$el.className=this.classWrapper,this.keyboardLayout.lines.forEach((function(t){e.$el.append(e.buildKeyboardLine(t))})),document.body.append(this.$el)}},{key:"buildKeyboardLine",value:function(e){var t=this,s=document.createElement("div");return s.className=this.classLine,e.forEach((function(e){s.append(t.buildKeyboardButton(e))})),s}},{key:"buildKeyboardButton",value:function(e){var t=this,s=document.createElement("div"),n=document.createElement("span");s.className="".concat(this.classButton," key-").concat(e.keyCode),s.append(n),n.className=this.classButtonText,n.innerText=this.getButtonChar(e),e.special&&s.classList.add(this.classButtonWide),e.special&&"space"===e.special&&s.classList.add(this.classButtonExtraWide);var a=function(){s.innerText!==t.getButtonChar(e)&&(n.classList.add(t.classButtonTextHide),n.ontransitionend=function(){n.ontransitionend=null,n.innerText=t.getButtonChar(e),n.classList.add(t.classButtonTextShow),n.classList.remove(t.classButtonTextHide),setTimeout(n.classList.remove.bind(n.classList,t.classButtonTextShow),0)})};return this.$el.addEventListener(this.eventChangeLanguage,a),this.$el.addEventListener(this.eventChangeRegistry,a),s.addEventListener("click",this.handleButtonClick.bind(this,e)),s}},{key:"setInputListeners",value:function(){var e=this;this.input.element.addEventListener("focus",(function(){e.keyboardShow()})),this.input.element.addEventListener("keydown",(function(t){if(t instanceof KeyboardEvent){if(e.soundButtonByKeyCode(t.which),e.highlightButtonByKeyCode(t.which),[16,20].includes(t.which))return t.preventDefault(),void(20===t.which?e.toggleUppercase():16===t.which&&e.toggleShift());if(t.ctrlKey)return;var s=e.getButtonCharByKeyCode(t.which);s&&(e.input.push(s),t.preventDefault())}}))}},{key:"getButtonChar",value:function(e){var t=this.isShifted&&e.chars[this.currentLanguage].shift?"shift":this.isShifted&&this.isUppercase?"normal":this.isUppercase||this.isShifted?"uppercase":"normal";return e.chars[this.currentLanguage][t]}},{key:"getButtonCharByKeyCode",value:function(e){var t=this,s="";return n.lines.forEach((function(n){n.forEach((function(n){n.keyCode!==e||n.special||(s=t.getButtonChar(n))}))})),s}},{key:"highlightButtonByKeyCode",value:function(e){var t=this,s=this.$el.querySelector(".key-".concat(e));s&&(this.highlightingButtons[e]&&(clearTimeout(this.highlightingButtons[e]),delete this.highlightingButtons[e]),s.classList.add("highlight"),this.highlightingButtons[e]=setTimeout((function(){s.classList.remove("highlight"),delete t.highlightingButtons[e]}),250))}},{key:"soundButtonByKeyCode",value:function(e){if(this.isSoundAlowed){var t="";n.lines.forEach((function(s){s.forEach((function(s){s.keyCode===e&&s.special&&(t=s.special)}))})),this.sounds[t]||(t="key_".concat(this.currentLanguage));var s=this.audio.createBufferSource();s.connect(this.audio.destination),s.buffer=this.sounds[t].buffer,s.start(0)}}},{key:"loadSounds",value:function(){var e=this,t=function(t){fetch(e.sounds[t].src).then((function(e){return e.arrayBuffer()})).then((function(s){return e.audio.decodeAudioData(s,(function(s){e.sounds[t].buffer=s}))}))};for(var s in this.sounds)t(s)}},{key:"handleButtonClick",value:function(e,t){e.special?("changeLanguage"===e.special?this.toggleLanguage():"capslock"===e.special?this.toggleUppercase():"shift"===e.special?this.toggleShift():"space"===e.special?this.input.push(" "):"backspace"===e.special?this.input.removeChar():"enter"===e.special?this.input.push("\n"):"close"===e.special?this.keyboardHide():"arrow-left"===e.special?this.input.moveCursorLeft():"arrow-right"===e.special?this.input.moveCursorRight():"toggleSound"===e.special?this.toggleSound():"toggleVoiceRecognition"===e.special&&this.toggleVoiceRecognition(),"close"!==e.special&&this.input.element.focus()):this.input.push(this.getButtonChar(e)),this.soundButtonByKeyCode(e.keyCode)}},{key:"toggleLanguage",value:function(){this.currentLanguage="ru"===this.currentLanguage?"en":"ru",this.toggleVoiceRecognitionLanguage(),this.$el.dispatchEvent(new Event(this.eventChangeLanguage))}},{key:"toggleUppercase",value:function(){this.isUppercase=!this.isUppercase,this.$el.classList[this.isUppercase?"add":"remove"]("uppercase"),this.$el.dispatchEvent(new Event(this.eventChangeRegistry))}},{key:"toggleShift",value:function(){this.isShifted=!this.isShifted,this.$el.classList[this.isShifted?"add":"remove"]("shifted"),this.$el.dispatchEvent(new Event(this.eventChangeRegistry))}},{key:"toggleSound",value:function(){this.isSoundAlowed=!this.isSoundAlowed,this.$el.classList[this.isSoundAlowed?"remove":"add"]("muted")}},{key:"toggleVoiceRecognition",value:function(){this.isVoiceRecognitionActive=!this.isVoiceRecognitionActive,this.$el.classList[this.isVoiceRecognitionActive?"add":"remove"]("listening"),this.recognition[this.isVoiceRecognitionActive?"start":"stop"]()}},{key:"toggleVoiceRecognitionLanguage",value:function(){this.recognition.lang="ru"===this.currentLanguage?"ru-RU":"en-US",this.recognition.stop()}},{key:"setRecognitionListeners",value:function(){var e=this,t="";this.recognition.addEventListener("result",(function(s){var n=s.results[s.results.length-1][0];if(n){n=(n=n.transcript).replace(/[^a-zа-я]+/gi," ").trim();for(var a=e.isShifted&&e.isUppercase||!e.isShifted&&!e.isUppercase?"toLowerCase":"toUpperCase",r=0;r<t.length;r++)e.input.removeChar();t=n=" "+n[a](),n.split("").forEach((function(t){return e.input.push(t)}))}})),this.recognition.addEventListener("end",(function(s){t="",e.isVoiceRecognitionActive&&e.recognition.start()}))}}])&&a(t.prototype,s),r&&a(t,r),e}())(document.getElementById("main-textarea"),n)},60:function(e){e.exports=JSON.parse('{"lines":[[{"keyCode":192,"chars":{"ru":{"normal":"ё","uppercase":"Ё","shift":"Ё"},"en":{"normal":"`","uppercase":"`","shift":"~"}}},{"keyCode":49,"chars":{"ru":{"normal":"1","uppercase":"1","shift":"!"},"en":{"normal":"1","uppercase":"1","shift":"!"}}},{"keyCode":50,"chars":{"ru":{"normal":"2","uppercase":"2","shift":"\\""},"en":{"normal":"2","uppercase":"2","shift":"@"}}},{"keyCode":51,"chars":{"ru":{"normal":"3","uppercase":"3","shift":"№"},"en":{"normal":"3","uppercase":"3","shift":"#"}}},{"keyCode":52,"chars":{"ru":{"normal":"4","uppercase":"4","shift":";"},"en":{"normal":"4","uppercase":"4","shift":"$"}}},{"keyCode":53,"chars":{"ru":{"normal":"5","uppercase":"5","shift":"%"},"en":{"normal":"5","uppercase":"5","shift":"%"}}},{"keyCode":54,"chars":{"ru":{"normal":"6","uppercase":"6","shift":":"},"en":{"normal":"6","uppercase":"6","shift":"^"}}},{"keyCode":55,"chars":{"ru":{"normal":"7","uppercase":"7","shift":"?"},"en":{"normal":"7","uppercase":"7","shift":"&"}}},{"keyCode":56,"chars":{"ru":{"normal":"8","uppercase":"8","shift":"*"},"en":{"normal":"8","uppercase":"8","shift":"*"}}},{"keyCode":57,"chars":{"ru":{"normal":"9","uppercase":"9","shift":"("},"en":{"normal":"9","uppercase":"9","shift":"("}}},{"keyCode":48,"chars":{"ru":{"normal":"0","uppercase":"0","shift":")"},"en":{"normal":"0","uppercase":"0","shift":")"}}},{"keyCode":189,"chars":{"ru":{"normal":"-","uppercase":"-","shift":"_"},"en":{"normal":"-","uppercase":"-","shift":"_"}}},{"keyCode":187,"chars":{"ru":{"normal":"=","uppercase":"=","shift":"+"},"en":{"normal":"=","uppercase":"=","shift":"+"}}},{"keyCode":220,"chars":{"ru":{"normal":"\\\\","uppercase":"\\\\","shift":"/"},"en":{"normal":"\\\\","uppercase":"\\\\","shift":"|"}}},{"special":"backspace","keyCode":8,"chars":{"ru":{"normal":"⟵","uppercase":"⟵"},"en":{"normal":"⟵","uppercase":"⟵"}}}],[{"special":"close","keyCode":"hide","chars":{"ru":{"normal":"↧","uppercase":"↧"},"en":{"normal":"↧","uppercase":"↧"}}},{"keyCode":81,"chars":{"ru":{"normal":"й","uppercase":"Й"},"en":{"normal":"q","uppercase":"Q"}}},{"keyCode":87,"chars":{"ru":{"normal":"ц","uppercase":"Ц"},"en":{"normal":"w","uppercase":"W"}}},{"keyCode":69,"chars":{"ru":{"normal":"у","uppercase":"У"},"en":{"normal":"e","uppercase":"E"}}},{"keyCode":82,"chars":{"ru":{"normal":"к","uppercase":"К"},"en":{"normal":"r","uppercase":"R"}}},{"keyCode":84,"chars":{"ru":{"normal":"е","uppercase":"Е"},"en":{"normal":"t","uppercase":"T"}}},{"keyCode":89,"chars":{"ru":{"normal":"н","uppercase":"Н"},"en":{"normal":"y","uppercase":"Y"}}},{"keyCode":85,"chars":{"ru":{"normal":"г","uppercase":"Г"},"en":{"normal":"u","uppercase":"U"}}},{"keyCode":73,"chars":{"ru":{"normal":"ш","uppercase":"Ш"},"en":{"normal":"i","uppercase":"I"}}},{"keyCode":79,"chars":{"ru":{"normal":"щ","uppercase":"Щ"},"en":{"normal":"o","uppercase":"O"}}},{"keyCode":80,"chars":{"ru":{"normal":"з","uppercase":"З"},"en":{"normal":"p","uppercase":"P"}}},{"keyCode":219,"chars":{"ru":{"normal":"х","uppercase":"Х"},"en":{"normal":"[","uppercase":"{"}}},{"keyCode":221,"chars":{"ru":{"normal":"ъ","uppercase":"Ъ"},"en":{"normal":"]","uppercase":"}"}}}],[{"special":"capslock","keyCode":20,"chars":{"ru":{"normal":"Capslock","uppercase":"Capslock"},"en":{"normal":"Capslock","uppercase":"Capslock"}}},{"keyCode":65,"chars":{"ru":{"normal":"ф","uppercase":"Ф"},"en":{"normal":"a","uppercase":"A"}}},{"keyCode":83,"chars":{"ru":{"normal":"ы","uppercase":"Ы"},"en":{"normal":"s","uppercase":"S"}}},{"keyCode":68,"chars":{"ru":{"normal":"в","uppercase":"В"},"en":{"normal":"d","uppercase":"D"}}},{"keyCode":70,"chars":{"ru":{"normal":"а","uppercase":"А"},"en":{"normal":"f","uppercase":"F"}}},{"keyCode":71,"chars":{"ru":{"normal":"п","uppercase":"П"},"en":{"normal":"g","uppercase":"G"}}},{"keyCode":72,"chars":{"ru":{"normal":"р","uppercase":"Р"},"en":{"normal":"h","uppercase":"H"}}},{"keyCode":74,"chars":{"ru":{"normal":"о","uppercase":"О"},"en":{"normal":"j","uppercase":"J"}}},{"keyCode":75,"chars":{"ru":{"normal":"л","uppercase":"Л"},"en":{"normal":"k","uppercase":"K"}}},{"keyCode":76,"chars":{"ru":{"normal":"д","uppercase":"Д"},"en":{"normal":"l","uppercase":"L"}}},{"keyCode":186,"chars":{"ru":{"normal":"ж","uppercase":"Ж"},"en":{"normal":";","uppercase":":"}}},{"keyCode":222,"chars":{"ru":{"normal":"э","uppercase":"Э"},"en":{"normal":"\'","uppercase":"\\""}}},{"special":"enter","keyCode":13,"chars":{"ru":{"normal":"↵","uppercase":"↵"},"en":{"normal":"↵","uppercase":"↵"}}}],[{"special":"shift","keyCode":16,"chars":{"ru":{"normal":"Shift","uppercase":"Shift"},"en":{"normal":"Shift","uppercase":"Shift"}}},{"keyCode":90,"chars":{"ru":{"normal":"я","uppercase":"Я"},"en":{"normal":"z","uppercase":"Z"}}},{"keyCode":88,"chars":{"ru":{"normal":"ч","uppercase":"Ч"},"en":{"normal":"x","uppercase":"X"}}},{"keyCode":67,"chars":{"ru":{"normal":"с","uppercase":"С"},"en":{"normal":"c","uppercase":"C"}}},{"keyCode":86,"chars":{"ru":{"normal":"м","uppercase":"М"},"en":{"normal":"v","uppercase":"V"}}},{"keyCode":66,"chars":{"ru":{"normal":"и","uppercase":"И"},"en":{"normal":"b","uppercase":"B"}}},{"keyCode":78,"chars":{"ru":{"normal":"т","uppercase":"Т"},"en":{"normal":"n","uppercase":"N"}}},{"keyCode":77,"chars":{"ru":{"normal":"ь","uppercase":"Ь"},"en":{"normal":"m","uppercase":"M"}}},{"keyCode":188,"chars":{"ru":{"normal":"б","uppercase":"Б"},"en":{"normal":",","uppercase":"<"}}},{"keyCode":190,"chars":{"ru":{"normal":"ю","uppercase":"Ю"},"en":{"normal":".","uppercase":">"}}},{"keyCode":191,"chars":{"ru":{"normal":".","uppercase":","},"en":{"normal":"/","uppercase":"?"}}}],[{"special":"toggleSound","keyCode":"toggleSound","chars":{"ru":{"normal":"🔇","uppercase":"🔇"},"en":{"normal":"🔇","uppercase":"🔇"}}},{"special":"changeLanguage","keyCode":"changeLanguage","chars":{"ru":{"normal":"RU","uppercase":"RU"},"en":{"normal":"EN","uppercase":"EN"}}},{"special":"alt","keyCode":18,"chars":{"ru":{"normal":"Alt","uppercase":"Alt"},"en":{"normal":"Alt","uppercase":"Alt"}}},{"special":"space","keyCode":32,"chars":{"ru":{"normal":"⊔","uppercase":"⊔"},"en":{"normal":"⊔","uppercase":"⊔"}}},{"special":"arrow-left","keyCode":37,"chars":{"ru":{"normal":"⟸","uppercase":"⟸"},"en":{"normal":"⟸","uppercase":"⟸"}}},{"special":"arrow-right","keyCode":39,"chars":{"ru":{"normal":"⟹","uppercase":"⟹"},"en":{"normal":"⟹","uppercase":"⟹"}}},{"special":"toggleVoiceRecognition","keyCode":"toggleVoiceRecognition","chars":{"ru":{"normal":"🎤","uppercase":"🎤"},"en":{"normal":"🎤","uppercase":"🎤"}}}]]}')}});